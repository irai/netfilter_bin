#!/bin/sh
#
# This scrip is called by systemd
# see: /etc/systemd/system/download.service
#
# To enable the service:
# sudo systemctl enable download
#
# To start the service manually
# sudo systemctl start download
#
#

start() {
  echo "Checking for new netfilter version in github"
  git config --global user.email "irai852@gmail.com"
  git config --global user.name "Irai"
  git fetch
  #git status -uno
  work=`git cherry master origin/master`
  if [ "$work" != "" ]; then
    echo "Updating netfilter from github"
    git merge
    if [ "$?" -eq 0 ]; then
      bash ./setup.sh
      /bin/systemctl restart netfilter
    fi
  fi
}

stop() {
  echo "Updating netfilter from github"
}

case $1 in
  start|stop) "$1" ;;
esac


